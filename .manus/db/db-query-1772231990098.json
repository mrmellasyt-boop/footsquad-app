{
  "query": "\n-- Supprimer les match_players des anciens matches NPC\nDELETE FROM match_players WHERE matchId IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\nDELETE FROM match_requests WHERE matchId IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\nDELETE FROM ratings WHERE matchId IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\nDELETE FROM motm_votes WHERE matchId IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\nDELETE FROM matches WHERE id IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\n-- Supprimer aussi le match 210001 qui est un match orphelin avec teamAId=210001 (équipe inexistante)\nDELETE FROM match_players WHERE matchId = 210001;\nDELETE FROM matches WHERE id = 210001;\n-- Supprimer les joueurs en doublon dans les équipes Eagles et Lions (garder seulement 5 par équipe)\n-- Eagles (id=150001) : garder les 5 premiers\nDELETE FROM players WHERE teamId = 150001 AND id NOT IN (\n  SELECT id FROM (SELECT id FROM players WHERE teamId = 150001 ORDER BY id LIMIT 5) AS keep\n);\n-- Lions (id=150002) : garder les 5 premiers\nDELETE FROM players WHERE teamId = 150002 AND id NOT IN (\n  SELECT id FROM (SELECT id FROM players WHERE teamId = 150002 ORDER BY id LIMIT 5) AS keep\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway04.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3nFQKwthWdG3fpb.root --database Y4PCeNWNUZAwiWRqW9iqRW --execute \n-- Supprimer les match_players des anciens matches NPC\nDELETE FROM match_players WHERE matchId IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\nDELETE FROM match_requests WHERE matchId IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\nDELETE FROM ratings WHERE matchId IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\nDELETE FROM motm_votes WHERE matchId IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\nDELETE FROM matches WHERE id IN (240001,240002,240003,240004,240005,240006,240007,240008,240009,240010);\n-- Supprimer aussi le match 210001 qui est un match orphelin avec teamAId=210001 (équipe inexistante)\nDELETE FROM match_players WHERE matchId = 210001;\nDELETE FROM matches WHERE id = 210001;\n-- Supprimer les joueurs en doublon dans les équipes Eagles et Lions (garder seulement 5 par équipe)\n-- Eagles (id=150001) : garder les 5 premiers\nDELETE FROM players WHERE teamId = 150001 AND id NOT IN (\n  SELECT id FROM (SELECT id FROM players WHERE teamId = 150001 ORDER BY id LIMIT 5) AS keep\n);\n-- Lions (id=150002) : garder les 5 premiers\nDELETE FROM players WHERE teamId = 150002 AND id NOT IN (\n  SELECT id FROM (SELECT id FROM players WHERE teamId = 150002 ORDER BY id LIMIT 5) AS keep\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 171
}