{
  "query": "\n-- Supprimer les joueurs NPC en doublon (garder le premier par openId)\nDELETE p FROM players p\nINNER JOIN users u ON p.userId = u.id\nWHERE u.openId LIKE 'npc_%'\nAND p.id NOT IN (\n  SELECT min_id FROM (\n    SELECT MIN(p2.id) as min_id\n    FROM players p2\n    INNER JOIN users u2 ON p2.userId = u2.id\n    WHERE u2.openId LIKE 'npc_%'\n    GROUP BY u2.openId\n  ) AS mins\n);\n\n-- Supprimer les users NPC en doublon (garder le premier par openId)\nDELETE u FROM users u\nWHERE u.openId LIKE 'npc_%'\nAND u.id NOT IN (\n  SELECT min_id FROM (\n    SELECT MIN(u2.id) as min_id\n    FROM users u2\n    WHERE u2.openId LIKE 'npc_%'\n    GROUP BY u2.openId\n  ) AS mins\n);\n\n-- Supprimer les équipes NPC en doublon (garder la première)\nDELETE t FROM teams t\nWHERE (t.name LIKE '%Eagles%' OR t.name LIKE '%Lions%')\nAND t.id NOT IN (\n  SELECT min_id FROM (\n    SELECT MIN(t2.id) as min_id\n    FROM teams t2\n    WHERE t2.name LIKE '%Eagles%' OR t2.name LIKE '%Lions%'\n    GROUP BY t2.name\n  ) AS mins\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway04.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3nFQKwthWdG3fpb.root --database Y4PCeNWNUZAwiWRqW9iqRW --execute \n-- Supprimer les joueurs NPC en doublon (garder le premier par openId)\nDELETE p FROM players p\nINNER JOIN users u ON p.userId = u.id\nWHERE u.openId LIKE 'npc_%'\nAND p.id NOT IN (\n  SELECT min_id FROM (\n    SELECT MIN(p2.id) as min_id\n    FROM players p2\n    INNER JOIN users u2 ON p2.userId = u2.id\n    WHERE u2.openId LIKE 'npc_%'\n    GROUP BY u2.openId\n  ) AS mins\n);\n\n-- Supprimer les users NPC en doublon (garder le premier par openId)\nDELETE u FROM users u\nWHERE u.openId LIKE 'npc_%'\nAND u.id NOT IN (\n  SELECT min_id FROM (\n    SELECT MIN(u2.id) as min_id\n    FROM users u2\n    WHERE u2.openId LIKE 'npc_%'\n    GROUP BY u2.openId\n  ) AS mins\n);\n\n-- Supprimer les équipes NPC en doublon (garder la première)\nDELETE t FROM teams t\nWHERE (t.name LIKE '%Eagles%' OR t.name LIKE '%Lions%')\nAND t.id NOT IN (\n  SELECT min_id FROM (\n    SELECT MIN(t2.id) as min_id\n    FROM teams t2\n    WHERE t2.name LIKE '%Eagles%' OR t2.name LIKE '%Lions%'\n    GROUP BY t2.name\n  ) AS mins\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 87
}